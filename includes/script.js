var uctcApp=angular.module("uctcApp",[]);uctcApp.service("Data",["$http",function(t){return{getData:function(){return t.get(siteUrl+"/wp-admin/admin-ajax.php?action=uctcgetdata")},saveData:function(a){return t.post(siteUrl+"/wp-admin/admin-ajax.php?action=uctcsavedata",a)}}}]),uctcApp.controller("indexController",["$scope","$http","Data",function(t,a,e){t.data={},e.getData().success(function(a){t.data=a}),t.addVariable=function(){0==t.data.uctc_variables.length?t.data.uctc_variables.push({name:"",value:""}):alert("To get unlimited custom variables please upgrade to the premium version!")},t.save=function(){e.saveData(t.data).success(function(t){alert("Data saved!")})},t.remove=function(t,a){t.splice(a,1)},t.addScript=function(a){t.availableVariables=t.data.uctc_variables,t.currentScript={type:a,location:"1"},angular.element("#uctc-modal").trigger("click")},t.editScript=function(a,e){t.availableVariables=t.data.uctc_variables,t.currentScript=a,t.currentScript.old_index=e,angular.element("#uctc-modal").trigger("click")},t.saveScript=function(){var a=t.currentScript.type;t.currentScript.old_index>-1&&t.data[a].splice(t.currentScript.old_index,1),t.currentScript.name&&t.currentScript.script&&(t.data[a]||(t.data[a]=[]),t.data[a].push(t.currentScript),angular.element(".close-animatedModal").trigger("click"),t.currentScript={}),alert("Script generated, but is not saved until you click Save All Scripts")},t.cancelScript=function(){angular.element(".close-animatedModal").trigger("click")},t.preview=function(){angular.forEach(t.availableVariables,function(a,e){var c=new RegExp("{"+a.name+"}","g");t.currentScript.script=t.currentScript.script.replace(c,a.value)}),angular.element(document.body).append(t.currentScript.script)}}]);